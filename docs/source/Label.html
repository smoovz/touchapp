<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-chart-label-Label'>/**
</span> * @class Ext.chart.label.Label
 * @extends Ext.draw.sprite.Text
 *
 * Sprite used to represent labels in series.
 */
Ext.define(&#39;Ext.chart.label.Label&#39;, {
    extend: &#39;Ext.draw.sprite.Text&#39;,
    requires: [&#39;Ext.chart.label.Callout&#39;],

    inheritableStatics: {
<span id='Ext-chart-label-Label-static-property-def'>        def: {
</span>            processors: {
                callout: &#39;limited01&#39;,
                calloutPlaceX: &#39;number&#39;,
                calloutPlaceY: &#39;number&#39;,
                calloutStartX: &#39;number&#39;,
                calloutStartY: &#39;number&#39;,
                calloutEndX: &#39;number&#39;,
                calloutEndY: &#39;number&#39;,
                calloutColor: &#39;color&#39;,
                calloutVertical: &#39;bool&#39;,
                labelOverflowPadding: &#39;number&#39;,
                display: &#39;enums(none,under,over,rotate,insideStart,insideEnd,outside)&#39;,
                orientation: &#39;enums(horizontal,vertical)&#39;,
                renderer: &#39;default&#39;
            },
            defaults: {
                callout: 0,
                calloutPlaceX: 0,
                calloutPlaceY: 0,
                calloutStartX: 0,
                calloutStartY: 0,
                calloutEndX: 0,
                calloutEndY: 0,
                calloutVertical: false,
                calloutColor: &#39;black&#39;,
                labelOverflowPadding: 5,
                display: &#39;none&#39;,
                orientation: &#39;&#39;,
                renderer: null
            },

            dirtyTriggers: {
                callout: &#39;transform&#39;,
                calloutPlaceX: &#39;transform&#39;,
                calloutPlaceY: &#39;transform&#39;,
                labelOverflowPadding: &#39;transform&#39;,
                calloutRotation: &#39;transform&#39;,
                display: &#39;hidden&#39;
            },

            updaters: {
                hidden: function (attrs) {
                    attrs.hidden = attrs.display === &#39;none&#39;;
                }
            }
        }
    },

    config: {
<span id='Ext-chart-label-Label-cfg-fx'>        /**
</span>         * @cfg {Object} fx Animation configuration.
         */
        fx: {
            customDuration: {
                callout: 200
            }
        },
<span id='Ext-chart-label-Label-cfg-field'>        field: null
</span>    },

<span id='Ext-chart-label-Label-method-prepareModifiers'>    prepareModifiers: function () {
</span>        this.callSuper(arguments);
        this.calloutModifier = new Ext.chart.label.Callout({sprite: this});
        this.fx.setNext(this.calloutModifier);
        this.calloutModifier.setNext(this.topModifier);
    },

<span id='Ext-chart-label-Label-method-render'>    render: function (surface, ctx, clipRegion) {
</span>        var me = this,
            attr = me.attr;
        ctx.save();
        ctx.globalAlpha *= Math.max(0, attr.callout - 0.5) * 2;
        if (ctx.globalAlpha &gt; 0) {
            ctx.strokeStyle = attr.calloutColor;
            ctx.fillStyle = attr.calloutColor;
            ctx.beginPath();
            ctx.moveTo(me.attr.calloutStartX, me.attr.calloutStartY);
            ctx.lineTo(me.attr.calloutEndX, me.attr.calloutEndY);
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(me.attr.calloutStartX, me.attr.calloutStartY, 1, 0, 2 * Math.PI, true);
            ctx.fill();

            ctx.beginPath();
            ctx.arc(me.attr.calloutEndX, me.attr.calloutEndY, 1, 0, 2 * Math.PI, true);
            ctx.fill();
        }
        ctx.restore();

        Ext.draw.sprite.Text.prototype.render.apply(me, arguments);
    }
});</pre>
</body>
</html>
